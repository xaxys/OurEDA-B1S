# PWM-传感器控制板程序

位于推进器控制仓的STM32主要负责控制PWM输出和接收一部分传感器数据

最新程序为`file_rebuild`，修复了很多问题，并合理使用了FreeRTOS的互斥量、信号量，避免使用全局变量

## 初步测试结果

1. PWM输出正常
2. 传送带PWM输出正常
3. 由于PCB设计问题，继电器无法控制
4. 机械臂PWM缺少两路输出（其他四路工作正常），怀疑缺少上位机指令导致
5. 缺少灯光PWM输出，初步怀疑缺少上位机指令导致
6. 缺少云台PWM输出，初步怀疑缺少上位机指令导致
7. 缺少上传串口信息（两次检测中一次可以读取到十六进制数据，一次无法读取），经检测传感器并未损坏，怀疑是程序问题

## 最终测试结果

1. 修复了继电器问题
2. 数字隔离器损坏导致灯光、云台缺少输出，已修复
3. 机械臂PWM缺少两路输出，修复其中一路（为软件问题），另一路暂时未能修复，原因不明
4. 缺少上传串口信息，怀疑是程序问题
5. 暂未发现其他问题

### Debug结果

1. 通过外挂自制的光耦-继电器模块彻底修复继电器问题
2. 修复所有PWM
3. 发现串口程序问题，无法正常从传感器读取数据上传，准备修复

## 实机测试结果

1. 修复了串口程序问题
2. 基本控制功能正常
3. 无法控制灯光PWM
4. 未验证串口信息发送准确性

### Dubug结果

1. 灯光只能使用4.2V以上电压驱动（典型值5V）
2. 发生串口控制失灵时不灵的情况，怀疑是调整为50Hz的PWM信号问题，已经改回



